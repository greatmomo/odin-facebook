<%# loop across all users and show them with variable friend request buttons %>


<div class="column is-2 is-offset-5">
  <div class="box">
    <table class="table">
      <thead>Friends</thead>
      <% @users.each do |user| %>
        <% unless current_user == user %>
          <tr>
            <td>
              <div class="span"><%= user.name %></div>
            </td>
    
            <td>
              <% if current_user.requestStatus(user) == "pending" %>
                <span class="icon">
                  <i class="fa-solid fa-clock"></i>
                </span>
              <% elsif current_user.requestStatus(user) == "accepted" %>
                <span class="icon">
                  <i class="fa-solid fa-user-check"></i>
                </span>
              <% else %>
                <%= button_to current_user.friendRequest(current_user, user) do %>
                  <div class="button">
                    <span>
                      <i class="fa-solid fa-user-plus"></i>
                      Add Friend
                    </span>
                  </div>
                <% end %>
              <% end %>
            </td>
          </tr>
        <% end %>
      <% end %>
    </table>
  </div>
</div>
